<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow | Personal Productivity</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #fafafa; }
        .priority-1 { border-left: 4px solid #de4c4a; } /* High */
        .priority-2 { border-left: 4px solid #f4a261; } /* Medium */
        .priority-3 { border-left: 4px solid #2a9d8f; } /* Low */
        .completed { text-decoration: line-through; opacity: 0.6; }
        @media (max-width: 768px) {
            .sidebar { transform: translateX(-100%); transition: 0.3s; position: fixed; z-index: 50; }
            .sidebar.active { transform: translateX(0); }
        }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar w-64 bg-stone-50 h-full border-r border-gray-200 flex-shrink-0">
        <div class="p-4 flex items-center justify-between">
            <span class="font-bold text-xl text-orange-600"><i class="fa-solid fa-check-double mr-2"></i>TaskFlow</span>
            <button onclick="toggleSidebar()" class="md:hidden text-gray-500"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <nav class="mt-4 px-2">
            <div class="space-y-1">
                <button onclick="filterTasks('inbox')" class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-md bg-orange-100 text-orange-900">
                    <i class="fa-solid fa-inbox mr-3 text-blue-500"></i> Inbox
                </button>
                <button onclick="filterTasks('today')" class="w-full flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-md">
                    <i class="fa-regular fa-calendar mr-3 text-green-600"></i> Today
                </button>
            </div>
            <div class="mt-8">
                <h3 class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Projects</h3>
                <div id="project-list" class="mt-2 space-y-1">
                    <!-- Projects injected here -->
                </div>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col min-w-0 bg-white overflow-y-auto">
        <!-- Header -->
        <header class="h-16 border-b border-gray-200 flex items-center justify-between px-4 md:px-8">
            <div class="flex items-center">
                <button onclick="toggleSidebar()" class="mr-4 text-gray-500 md:hidden"><i class="fa-solid fa-bars"></i></button>
                <h2 id="view-title" class="text-xl font-bold text-gray-800">Inbox</h2>
            </div>
            <div class="flex items-center space-y-0 space-x-4">
                <button onclick="openModal()" class="bg-orange-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-orange-700 transition">
                    <i class="fa-solid fa-plus mr-1"></i> Add Task
                </button>
            </div>
        </header>

        <!-- Task List -->
        <div class="max-w-3xl mx-auto w-full p-4 md:p-8">
            <div id="task-container" class="space-y-3">
                <!-- Tasks injected here -->
            </div>
        </div>
    </main>

    <!-- Task Modal -->
    <div id="task-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[100]">
        <div class="bg-white rounded-lg w-full max-w-md p-6 shadow-xl">
            <h3 class="text-lg font-bold mb-4">Add New Task</h3>
            <input type="text" id="task-input" placeholder="Task name" class="w-full border border-gray-300 rounded-md p-2 mb-4 focus:ring-2 focus:ring-orange-500 outline-none">
            <div class="grid grid-cols-2 gap-4 mb-4">
                <select id="priority-input" class="border border-gray-300 rounded-md p-2 text-sm">
                    <option value="3">Low Priority</option>
                    <option value="2">Medium Priority</option>
                    <option value="1">High Priority</option>
                </select>
                <input type="date" id="date-input" class="border border-gray-300 rounded-md p-2 text-sm">
            </div>
            <div class="flex justify-end space-x-3">
                <button onclick="closeModal()" class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md">Cancel</button>
                <button onclick="addTask()" class="px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700">Add Task</button>
            </div>
        </div>
    </div>

    <script>
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        function openModal() {
            document.getElementById('task-modal').classList.remove('hidden');
            document.getElementById('task-input').focus();
        }

        function closeModal() {
            document.getElementById('task-modal').classList.add('hidden');
            document.getElementById('task-input').value = '';
        }

        function addTask() {
            const title = document.getElementById('task-input').value;
            const priority = document.getElementById('priority-input').value;
            const dueDate = document.getElementById('date-input').value;

            if (!title) return;

            const newTask = {
                id: Date.now(),
                title,
                priority,
                dueDate: dueDate || new Date().toISOString().split('T')[0],
                completed: false
            };

            tasks.push(newTask);
            saveAndRender();
            closeModal();
        }

        function toggleTask(id) {
            tasks = tasks.map(t => t.id === id ? {...t, completed: !t.completed} : t);
            saveAndRender();
        }

        function deleteTask(id) {
            tasks = tasks.filter(t => t.id !== id);
            saveAndRender();
        }

        function saveAndRender() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
            renderTasks();
        }

        function renderTasks() {
            const container = document.getElementById('task-container');
            container.innerHTML = '';

            tasks.sort((a, b) => a.priority - b.priority).forEach(task => {
                const div = document.createElement('div');
                div.className = `flex items-center justify-between p-4 bg-white border border-gray-100 rounded-lg shadow-sm priority-${task.priority}`;
                div.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <input type="checkbox" ${task.completed ? 'checked' : ''} 
                               onclick="toggleTask(${task.id})" 
                               class="w-5 h-5 rounded-full border-gray-300 text-orange-600 focus:ring-orange-500">
                        <div>
                            <p class="text-sm font-medium ${task.completed ? 'completed text-gray-400' : 'text-gray-800'}">${task.title}</p>
                            <p class="text-xs text-gray-500"><i class="fa-regular fa-calendar-check mr-1"></i>${task.dueDate}</p>
                        </div>
                    </div>
                    <button onclick="deleteTask(${task.id})" class="text-gray-400 hover:text-red-500 transition">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                `;
                container.appendChild(div);
            });
        }

        // Initial Render
        renderTasks();
    </script>
</body>
</html>
